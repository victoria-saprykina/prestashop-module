# Catalog

## Generate Icml

По кнопке Generate now можно вручную сгенерировать каталог. Для сгенерированного каталога отображается время его
последней генерации, количество товаров и торговых предложений. Если с момента генерации прошло более 4-х часов, то
будет отображено соответствующее уведомление.
<br>Сгенерированный каталог будет доступен по ссылке https://yoursite.com/simla.xml.<br><br>
Обратите внимание, что кнопка “Генерировать сейчас”, только **обновляет** содержимое ICML-файла. Для загрузки изменений в CRM, требуется нажать “Загрузить каталог из ICML сейчас” в настройках магазина в CRM. <br><br>
В PrestaShop габариты в карточке товара записываются в формате Ширина / Высота / Глубина, однако в CRM, формат габаритов следующий: Длина / Ширина / Высота, поэтому при формирование каталога, запись габаритов происходит в следующем порядке: Глубина / Ширина / Высота для их корректной передачи в CRM (#75738).
<br><br>При генерации ICML модуль использует для изображения товара обложку (cover). Для торговых предложений товара (комбинаций товара) текущая логика модуля будет подставлять также обложку (cover), если она присутствует (#76045).


## Update URL

При загрузке страницы выполняется проверка URL адреса файла Icml каталога, указанного в настройках магазина в CRM. Если
адрес в системе не совпадает с фактическим адресом сгенерированного файла, то на странице отображается соответствующее
уведомление и кнопка, позволяющая обновить URL.

## Jobs run

Задачи генерации каталога и обновления URL выполняются через **JobManager**
в [`force` режиме](../2.%20Workflow/CLI%20&%20Job%20Manager/Job%20Manager.md#force-option).

## Multistore

При включенной опции **Multistore** есть возможность запустить процесс генерации каталога/обновления URL сразу для
нескольких или всех магазинов. Для этого нужно перейти в контекст конкретной группы или всех магазинов и нажать
соответствующую кнопку.

В контексте группы отображается информация о каталогах для каждого магазина, входящего в эту группу. Можно перейти в
контекст конкретного магазина, кликнув по его имени.

## Manage site settings

Можно перейти в настройки каталога в CRM, кликнув по `Manage site settings`. Если не удалось сформировать ссылку на
настройки каталога, то вместо этого для магазина будет предоставлена ссылка на список всех магазинов CRM

## Errors

При наличии каких либо проблем с каталогом — отсутствие файла, устаревший файл или несовпадение URL,
вкладка `Icml catalog` будет подсвечиваться красным цветом, сигнализируя об ошибках. В случае отсутствия файла каталога
в первые 4 часа после установки и первичной настройки модуля ошибка возникать не будет
